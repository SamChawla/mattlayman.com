<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link rel='stylesheet' href='/screen.css'>
  <link href='http://fonts.googleapis.com/css?family=Cabin:600|Lora'
    rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">
  <title>When you're feeling all TAPped out - mattlayman.com</title>
  <meta name='viewport' content='width=device-width' />
  <meta property="og:type" content="article" />
<meta property="og:url" content="http://www.mattlayman.com/2013/all-tapped-out.html" />
<meta property="og:image" content="" />
<meta property="og:title" content="When you're feeling all TAPped out" />
<meta property="og:description" content="An explanation of the Test Anything Protocol (TAP)" />
  <link rel='alternate' href='/feed.xml' title="Matt Layman's Writings"
    type='atom+xml'>
  <script src="//load.sumome.com/" data-sumo-site-id="bebd12621ec197c6697df2c9248f3a0e593a38b2eae32e10899930dae8668b9a" async="async"></script>
</head>
<body>
<div id='container'>
  <h1>When you're feeling all TAPped out</h1>
<p class='byline'>By <a href='/'>Matt Layman</a> on September 4, 2013</p>
<p><img class='book' src='tap.png'></p>
<p>Good software practices say you should do automated testing, but what do you do
when you work in an environment that can&rsquo;t get good test tools? Use a simple
testing protocol like TAP.</p>
<p>TAP is the <em>Test Anything Protocol</em>. The protocol is so simple that you could
probably write code to make TAP output in minutes. It is a line based protocol
which means that any language that has some sort of print method can generate
TAP. That&rsquo;s basically all software languages in common use.</p>
<p>I could provide the rules, but an example would be easier.</p>
<div class="codehilite"><pre><span></span><span class="c"># This is a comment because it starts with a hash symbol.</span>
<span class="kr">ok</span> <span class="mi">1</span> Something passed here.
<span class="gr">not ok</span> <span class="mi">2</span> Whoops, there was a failure.
When there is a line that TAP does not understand (like this one), it will skip it.
<span class="c"># TAP files should have a plan in the format of &quot;1..&lt;some number of tests&gt;&quot;.</span>
<span class="kd">1..2</span><span class="c"></span>
</pre></div>


<p>The key to the protocol is <code>ok</code> and <code>not ok</code>. When lines start with one of
these two phrases, TAP readers will interpret it as a pass or failure. Besides
the test number, everything else on the line is extra. Toss in how many tests
were run and you have fully functional TAP output. We can prove it with
Perl&rsquo;s aptly name <code>prove</code> tool.</p>
<div class="codehilite"><pre><span></span><span class="gp">matt@eden:~$</span> prove sample.tap
<span class="go">sample.tap .. Failed 1/2 subtests</span>

<span class="go">Test Summary Report</span>
<span class="go">-------------------</span>
<span class="go">sample.tap (Wstat: 0 Tests: 2 Failed: 1)</span>
<span class="go">  Failed test:  2</span>
<span class="go">Files=1, Tests=2,  0 wallclock secs ( 0.01 usr +  0.00 sys =  0.01 CPU)</span>
<span class="go">Result: FAIL</span>
</pre></div>


<p>Once you have some TAP results from your awesome homegrown test suite, you can
get them into a TAP reader like the <a href="https://wiki.jenkins-ci.org/display/JENKINS/TAP+Plugin">Jenkins
plugin</a> or a specific
tool like <a href="http://tapper.github.io/Tapper/">Tapper</a>.</p>
<p>There are some additional features that I did not discuss here (like TODO
tracking). See the <a href="http://testanything.org/">TAP website</a> for more details.
More adventurous individuals can check out the specifics by looking at the de
facto parser, <a href="http://search.cpan.org/~ovid/Test-Harness-3.28/lib/TAP/Parser.pm">TAP::Parser</a>, on Perl&rsquo;s CPAN.</p>
<p>If you want to chat about this with me, I'm
  <a href="https://twitter.com/mblayman">@mblayman</a> on Twitter.</p>
  <br>
  <footer>
    <p><img alt='Creative Commons Attribution 4.0 International License'
      src='/cc.png' width='80' height='15'> <a href='/'> Matt Layman</a>,
      2017</p>
  </footer>
</div>
</body>
</html><!-- handrolled for excellence -->
